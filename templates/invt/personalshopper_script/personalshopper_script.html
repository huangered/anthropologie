isPopup = document.getElementById('popupcontent');
if(isPopup){YAHOO.util.Event.addListener("back_link", "click", Venda.Widget.InvtPopups.featureHide);}

var loaderWheel = new Image(32,32);
loaderWheel.src = "http://anthropologie.uat.venda.com/content/ebiz/anthropologie/resources/images/wlprSwatches/rqSwchLoader.gif";

function validateForm(){
	if(isFieldValid("rqSwchForm_first-name")){
		if(isFieldValid("rqSwchForm_last-name")){
				if(isFieldValid("rqSwchForm_phone")){
					if(isFieldValid("rqSwchForm_dob")){
						if(isFieldValid("rqSwchForm_country")){
							if(isFieldValid("rqSwchForm_enquiry")){
								if(isEmailValid()){
										$('rqSwchForm').from.value = $('rqSwchForm').emailAddress.value;
										showLoader();
								}
								else{selectFocusForm("rqSwchForm_email","Please enter a valid email address.");}
								}
								else{selectFocusForm("rqSwchForm_enquiry","Please select your enquiry.");}
							}
							else{selectFocusForm("rqSwchForm_country","Please enter a country name.");}
						}
						else{selectFocusForm("rqSwchForm_dob","Please enter you date of birth.");}
					}
					else{selectFocusForm("rqSwchForm_phone","Please enter a valid phone number.");}
			}
		else{selectFocusForm("rqSwchForm_last-name","Please enter a last name.");}
		}
	else {selectFocusForm("rqSwchForm_first-name","Please enter a first name.");}
}

function resetAlert(){
	if($("rqSwchFormAlert").style.visibility == "visible"){$("rqSwchFormAlert").style.visibility = "hidden";}
}

function isFieldValid(myOBJ){
	var tempValue = $(myOBJ).value;
	if($(myOBJ).value != ""){return true;}
	else { return false; }
}

function isEmailValid(){
	var tempValue = $("rqSwchForm_email").value;
	var tempExt = tempValue.substring((tempValue.length - 4),tempValue.length);
	if(tempValue.indexOf("@") == -1){return false;}
	if(tempValue.indexOf(".") == -1){return false;}
	if(tempValue.length < 4){return false;}
	return true;
}

function selectFocusForm(myOBJ,myMSG){
	$("rqSwchFormAlert").innerHTML = "*&nbsp;" + myMSG;
	$("rqSwchFormAlert").style.visibility = "visible";
	if(myOBJ != ""){$(myOBJ).focus();}
}

function parseNavOBJ(index,value,response){
	var myNavARR = new Array();
	for(attribs in navigator){myNavARR[attribs] = navigator[attribs];}
	if(myNavARR[index].indexOf(value) != -1){if(response != 1){return myNavARR[index];}else{return true;}}
	else{return false;}
}

function showLoader(){
	$('rqSwchReceiptWrapper').style.backgroundColor = "transparent";
	$('rqSwchReceiptWrapper').style.border = "none";
	$('rqSwchReceiptWrapper').style.top = "239px";
	$('rqSwchReceiptWrapper').style.left = "406px";
	if(!parseNavOBJ("userAgent","Chrome")){$('rqSwchLoader').style.zIndex = "5";}
	if(parseNavOBJ("appVersion","AppleWebKit")){$('rqSwchLoader').innerHTML = "<img src=\"" + loaderWheel.src + "\"/>";}
	else{$('rqSwchLoader').style.backgroundImage = "url('" + loaderWheel.src + "')";}
	$('rqSwchLoader').style.display = "block";
	$('rqSwchReceiptWrapper').style.display = "block";
	$('rqSwchReceiptCurtain').style.display = "block";
	$('rqSwchReceiptWrapper').style.backgroundColor = "transparent";
	//$('rqSwchForm').submit();
	$('rqSwchForm').layout.value = 'noheaders';
	if(isPopup){ 
			ajaxFunction('<venda_codehttp>','popupcontent','rqSwchForm');
		}
	else {
			$('rqSwchForm').submit();
		}
}